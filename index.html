<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>æ¹–ç»é“¶è¡Œ ATM ç®¡ç†ç³»ç»Ÿ</title> <!-- ä¿®æ”¹ï¼šç³»ç»Ÿæ ‡é¢˜ -->
<script src="https://cdn.tailwindcss.com"></script>
<style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8fafc;
        }
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: #2563eb;
            color: white;
            border-radius: 6px;
            padding: 8px 16px;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-primary:hover {
            background: #1d4ed8;
        }
        .status-normal {
            color: #10b981;
        }
        .status-warning {
            color: #f59e0b;
        }
        .status-error {
            color: #ef4444;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 20px;
            border-radius: 8px;
            width: 400px;
        }
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .pagination button {
            margin: 0 5px;
            padding: 5px 10px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 4px;
            cursor: pointer;
        }
        .pagination button.active {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }
        .filter-btn {
            cursor: pointer;
            transition: all 0.2s;
        }
        .filter-btn.active {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }
</style>
</head>
<body>
<!-- ç™»å½•é¡µé¢ -->
<div class="min-h-screen flex items-center justify-center" id="loginPage">
<div class="card p-8 w-96">
<h1 class="text-2xl font-bold text-center mb-6">æ¹–ç»é“¶è¡Œ ATM ç®¡ç†ç³»ç»Ÿ</h1> <!-- ä¿®æ”¹ï¼šç³»ç»Ÿåç§° -->
<form id="loginForm">
<div class="mb-4">
<label class="block text-sm font-medium mb-2">ç”¨æˆ·å</label>
<input class="w-full p-2 border rounded" id="username" required="" type="text"/>
</div>
<div class="mb-6">
<label class="block text-sm font-medium mb-2">å¯†ç </label>
<div class="relative">
<input class="w-full p-2 border rounded pr-10" id="password" required="" type="password"/>
<button class="absolute right-2 top-2 text-gray-600 hover:text-gray-800" onclick="togglePasswordVisibility()" type="button">
<span id="eyeIcon">ğŸ‘</span>
</button>
</div>
</div>
<button class="btn-primary w-full" type="submit">ç™»å½•</button>
</form>
</div>
</div>
<!-- ä¸»é¡µé¢ -->
<div class="hidden" id="mainPage">
<!-- é¡¶éƒ¨å¯¼èˆª -->
<nav class="bg-white shadow-sm p-4">
<div class="flex justify-between items-center">
<h1 class="text-xl font-bold">æ¹–ç»é“¶è¡Œ ATM ç®¡ç†ç³»ç»Ÿ</h1> <!-- ä¿®æ”¹ï¼šç³»ç»Ÿåç§° -->
<div class="flex items-center space-x-4">
<span id="adminName">ç®¡ç†å‘˜</span>
<button class="btn-primary" onclick="logout()">é€€å‡º</button>
</div>
</div>
</nav>
<!-- ä¸»è¦å†…å®¹ -->
<div class="p-4">
<!-- ç»Ÿè®¡å¡ç‰‡ -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
<div class="card p-4">
<div class="text-sm text-gray-600">æ€»è®¾å¤‡æ•°</div>
<div class="text-2xl font-bold">24</div>
</div>
<div class="card p-4">
<div class="text-sm text-gray-600">æ­£å¸¸è¿è¡Œ</div>
<div class="text-2xl font-bold">20</div>
</div>
<div class="card p-4">
<div class="text-sm text-gray-600">å¼‚å¸¸è®¾å¤‡</div>
<div class="text-2xl font-bold">3</div>
</div>
<div class="card p-4">
<div class="text-sm text-gray-600">æ€»ç°é‡‘ä½™é¢</div>
<div class="text-2xl font-bold">Â¥2,658,300</div>
</div>
</div>
<!-- è®¾å¤‡åˆ—è¡¨ -->
<div class="card p-4 mb-6">
<div class="flex justify-between items-center mb-4">
<h2 class="text-lg font-bold">è®¾å¤‡ç›‘æ§</h2>
<div class="flex space-x-2">
<button class="px-3 py-1 border rounded filter-btn active" data-filter="all" onclick="filterDevices('all')">å…¨éƒ¨çŠ¶æ€</button>
<button class="px-3 py-1 border rounded filter-btn" data-filter="normal" onclick="filterDevices('normal')">æ­£å¸¸</button>
<button class="px-3 py-1 border rounded filter-btn" data-filter="abnormal" onclick="filterDevices('abnormal')">å¼‚å¸¸</button>
</div>
</div>
<table class="w-full">
<thead>
<tr class="border-b">
<th class="text-left p-2">è®¾å¤‡ç¼–å·</</th>
<th class="text-left p-2">è®¾å¤‡ä½ç½®</</th>
<th class="text-left p-2">å‰©ä½™ç°é‡‘</</th>
<th class="text-left p-2">è®¾å¤‡çŠ¶æ€</</th>
<th class="text-left p-2">æ“ä½œ</</th>
</tr>
</thead>
<tbody id="deviceTableBody">
<!-- è®¾å¤‡åˆ—è¡¨ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
</tbody>
</table>
</div>
</div>
</div>
<!-- è®¾å¤‡è¯¦æƒ…é¡µé¢ -->
<div class="hidden" id="detailPage">
<!-- é¡¶éƒ¨å¯¼èˆª -->
<nav class="bg-white shadow-sm p-4">
<div class="flex justify-between items-center">
<div class="flex items-center space-x-2">
<button class="text-blue-600" onclick="backToMain()">è¿”å›</button>
<span>/</span>
<span id="deviceId">ATM0001</span>
</div>
<div class="flex items-center space-x-4">
<button class="btn-primary" onclick="refreshStatus()">â†» åˆ·æ–°</button>
<button class="btn-primary">å¯¼å‡º</button>
</div>
</div>
</nav>
<!-- ä¸»è¦å†…å®¹ -->
<div class="p-4">
<!-- è®¾å¤‡ä¿¡æ¯ -->
<div class="card p-4 mb-6">
<h2 class="text-lg font-bold mb-4">è®¾å¤‡ä¿¡æ¯</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
<div>
<div class="text-sm text-gray-600">è®¾å¤‡ç¼–å·</div>
<div class="font-medium" id="detailDeviceId">ATM0001</div>
</div>
<div>
<div class="text-sm text-gray-600">è®¾å¤‡ä½ç½®</div>
<div class="font-medium" id="detailLocation">åŒ—äº¬å¸‚æœé˜³åŒºé‡‘èå¤§å¦1å±‚AåŒº</div>
</div>
<div>
<div class="text-sm text-gray-600">ç°é‡‘ä½™é¢</div>
<div class="font-medium" id="detailBalance">Â¥125,000</div>
</div>
<div>
<div class="text-sm text-gray-600">å½“å‰çŠ¶æ€</div>
<div class="font-medium">
<span class="status-normal" id="detailStatus">æ­£å¸¸</span>
<div class="text-sm text-gray-500" id="lastUpdate">æœ€åæ›´æ–°: 2025-11-28 15:43</div>
</div>
</div>
</div>
<div class="flex space-x-2">
<button class="btn-primary" onclick="refreshStatus()">â†» åˆ·æ–°çŠ¶æ€</button>
<button class="btn-primary" onclick="openCashModal()">è¡¥å……ç°é‡‘</button>
</div>
</div>
<!-- äº¤æ˜“è®°å½• -->
<div class="card p-4">
<div class="flex justify-between items-center mb-4">
<h2 class="text-lg font-bold">äº¤æ˜“è®°å½•</h2>
<div class="flex space-x-2">
<select class="border rounded p-1" id="transactionType">
<option value="all">å…¨éƒ¨äº¤æ˜“ç±»å‹</option>
<option value="withdraw">å–æ¬¾</option>
<option value="deposit">å­˜æ¬¾</option>
<option value="transfer">è½¬è´¦</option>
</select>
<input class="border rounded p-1" id="dateFilter" type="date"/>
<button class="btn-primary" onclick="filterTransactions()">ç­›é€‰</button>
</div>
</div>
<table class="w-full">
<thead>
<tr class="border-b">
<th class="text-left p-2">äº¤æ˜“å·</</th>
<th class="text-left p-2">æ—¶é—´</</th>
<th class="text-left p-2">ç”¨æˆ·</</th>
<th class="text-left p-2">ç±»å‹</</th>
<th class="text-left p-2">é‡‘é¢</</th>
<th class="text-left p-2">çŠ¶æ€</</th>
</tr>
</thead>
<tbody id="transactionTable">
<!-- äº¤æ˜“è®°å½•å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
</tbody>
</table>
<!-- åˆ†é¡µæ§ä»¶ -->
<div class="pagination" id="pagination">
<!-- åˆ†é¡µæŒ‰é’®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
</div>
</div>
</div>
</div>
<!-- è¡¥å……ç°é‡‘æ¨¡æ€æ¡† -->
<div class="modal" id="cashModal">
<div class="modal-content">
<h3 class="text-lg font-bold mb-4">è¡¥å……ç°é‡‘</h3>
<div class="mb-4">
<label class="block text-sm font-medium mb-2">è®¾å¤‡ç¼–å·</label>
<input class="w-full p-2 border rounded" id="modalDeviceId" readonly="" type="text"/>
</div>
<div class="mb-4">
<label class="block text-sm font-medium mb-2">è¡¥å……é‡‘é¢ (Â¥)</label>
<input class="w-full p-2 border rounded" id="cashAmount" min="1" required="" type="number"/>
</div>
<div class="flex justify-end space-x-2">
<button class="px-4 py-2 border rounded" onclick="closeCashModal()">å–æ¶ˆ</button>
<button class="btn-primary" onclick="submitCash()">ç¡®è®¤</button>
</div>
</div>
</div>
<footer class="text-center py-4 text-gray-600">
        æ¹–ç»é“¶è¡Œ ATM ç®¡ç†ç³»ç»Ÿ Â© 2025 ç‰ˆæƒæ‰€æœ‰ <!-- ä¿®æ”¹ï¼šç‰ˆæƒä¿¡æ¯ -->
    </footer>
<script>
        // è®¾å¤‡æ•°æ®åº“ï¼ˆå®Œæ•´çš„24å°è®¾å¤‡ï¼‰
        const devicesData = [
            { id: 'ATM0001', location: 'åŒ—äº¬å¸‚æœé˜³åŒºé‡‘èå¤§å¦1å±‚AåŒº', balance: 125000, status: 'normal', lastUpdate: '2025-11-29 15:43' },
            { id: 'ATM0002', location: 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºé™†å®¶å˜´1å·', balance: 98500, status: 'normal', lastUpdate: '2025-11-29 14:22' },
            { id: 'ATM0003', location: 'å¹¿å·å¸‚å¤©æ²³åŒºå¤©æ²³åŸB1å±‚', balance: 0, status: 'warning', lastUpdate: '2025-11-29 10:15' },
            { id: 'ATM0004', location: 'æ·±åœ³å¸‚ç¦ç”°åŒºä¼šå±•ä¸­å¿ƒ', balance: 142800, status: 'error', lastUpdate: '2025-11-29 09:30' },
            { id: 'ATM0005', location: 'æ­å·å¸‚è¥¿æ¹–åŒºé¾™ç¿”å¹¿åœº', balance: 156200, status: 'normal', lastUpdate: '2025-11-29 15:20' },
            { id: 'ATM0006', location: 'å—äº¬å¸‚é¼“æ¥¼åŒºæ–°è¡—å£å•†åœˆ', balance: 89300, status: 'normal', lastUpdate: '2025-11-29 14:50' },
            { id: 'ATM0007', location: 'è‹å·å¸‚å·¥ä¸šå›­åŒºæ–¹ç³–å°é•‡', balance: 0, status: 'warning', lastUpdate: '2025-11-29 11:05' },
            { id: 'ATM0008', location: 'æˆéƒ½å¸‚é”¦æ±ŸåŒºæ˜¥ç†™è·¯', balance: 178900, status: 'normal', lastUpdate: '2025-11-29 15:33' },
            { id: 'ATM0009', location: 'æ­¦æ±‰å¸‚æ±Ÿæ±‰åŒºæ±‰å£å¹¿åœº', balance: 95600, status: 'normal', lastUpdate: '2025-11-29 14:44' },
            { id: 'ATM0010', location: 'è¥¿å®‰å¸‚ç¢‘æ—åŒºå—é—¨å¹¿åœº', balance: 112400, status: 'normal', lastUpdate: '2025-11-29 15:10' },
            { id: 'ATM0011', location: 'é‡åº†å¸‚æ¸ä¸­åŒºè§£æ”¾ç¢‘', balance: 145700, status: 'normal', lastUpdate: '2025-11-29 15:25' },
            { id: 'ATM0012', location: 'é•¿æ²™å¸‚èŠ™è“‰åŒºæœé˜³å¹¿åœº', balance: 87600, status: 'normal', lastUpdate: '2025-11-29 14:35' },
            { id: 'ATM0013', location: 'æ²ˆé˜³å¸‚å’Œå¹³åŒºå¤ªåŸè¡—', balance: 0, status: 'warning', lastUpdate: '2025-11-29 10:20' },
            { id: 'ATM0014', location: 'é’å²›å¸‚å¸‚å—åŒºä¸­å±±è·¯', balance: 134500, status: 'normal', lastUpdate: '2025-11-29 15:15' },
            { id: 'ATM0015', location: 'å¤§è¿å¸‚ä¸­å±±åŒºäººæ°‘å¹¿åœº', balance: 98200, status: 'normal', lastUpdate: '2025-11-29 14:58' },
            { id: 'ATM0016', location: 'å®æ³¢å¸‚æ±ŸåŒ—åŒºå®æ³¢å¤©åœ°', balance: 165300, status: 'normal', lastUpdate: '2025-11-29 15:40' },
            { id: 'ATM0017', location: 'ç¦å·å¸‚é¼“æ¥¼åŒºäº”ä¸€å¹¿åœº', balance: 0, status: 'warning', lastUpdate: '2025-11-29 08:30' },
            { id: 'ATM0018', location: 'å¦é—¨å¸‚æ€æ˜åŒºä¸­å±±è·¯', balance: 125800, status: 'normal', lastUpdate: '2025-11-29 15:05' },
            { id: 'ATM0019', location: 'éƒ‘å·å¸‚é‡‘æ°´åŒºæ­£å¼˜åŸ', balance: 145600, status: 'error', lastUpdate: '2025-11-29 09:45' },
            { id: 'ATM0020', location: 'æµå—å¸‚å†ä¸‹åŒºæ³‰åŸå¹¿åœº', balance: 102300, status: 'normal', lastUpdate: '2025-11-29 14:30' },
            { id: 'ATM0021', location: 'å“ˆå°”æ»¨å¸‚é“é‡ŒåŒºä¸­å¤®å¤§è¡—', balance: 118900, status: 'normal', lastUpdate: '2025-11-29 15:18' },
            { id: 'ATM0022', location: 'å¤©æ´¥å¸‚å’Œå¹³åŒºè§£æ”¾è·¯', balance: 156700, status: 'normal', lastUpdate: '2025-11-29 15:35' },
            { id: 'ATM0023', location: 'åˆè‚¥å¸‚èœ€å±±åŒºæ·®æ²³è·¯', balance: 87400, status: 'normal', lastUpdate: '2025-11-29 14:42' },
            { id: 'ATM0024', location: 'ä¹Œé²æœ¨é½å¸‚å¤©å±±åŒºåŒ—é—¨', balance: 0, status: 'warning', lastUpdate: '2025-11-29 11:30' }
        ];
        // æ¨¡æ‹Ÿäº¤æ˜“è®°å½•æ•°æ®
        const transactions = [
            { id: 'TX20251129001', time: '2025-11-29 14:22', user: 'å¼ *å (å°¾å·6217)', type: 'å–æ¬¾', amount: '-Â¥3,000', status: 'æˆåŠŸ' },
            { id: 'TX20251129002', time: '2025-11-29 13:45', user: 'æ*æ˜ (å°¾å·8845)', type: 'å­˜æ¬¾', amount: '+Â¥5,000', status: 'æˆåŠŸ' },
            { id: 'TX20251129003', time: '2025-11-29 12:18', user: 'ç‹*æ–‡ (å°¾å·3312)', type: 'è½¬è´¦', amount: '-Â¥8,000', status: 'å¤„ç†ä¸­' },
            { id: 'TX20251129004', time: '2025-11-29 11:02', user: 'é™ˆ*çº¢ (å°¾å·7643)', type: 'å–æ¬¾', amount: '-Â¥1,500', status: 'å¤±è´¥' }
        ];
        
        // åˆ†é¡µç›¸å…³å˜é‡
        let currentPage = 1;
        const recordsPerPage = 4;
        let filteredTransactions = [...transactions];
        let currentDeviceFilter = 'all';
        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ç™»å½•è¡¨å•æäº¤
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                // ç›´æ¥ç™»å½•ï¼Œæ— éœ€éªŒè¯
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('mainPage').classList.remove('hidden');
                renderDeviceTable();
            });
            
            // åˆå§‹åŒ–äº¤æ˜“è®°å½•è¡¨æ ¼
            renderTransactionTable();
        });
        // è®¾å¤‡çŠ¶æ€ç­›é€‰åŠŸèƒ½
        function filterDevices(status) {
            currentDeviceFilter = status;
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-filter="${status}"]`).classList.add('active');
            renderDeviceTable();
        }
        // æ¸²æŸ“è®¾å¤‡è¡¨æ ¼
        function renderDeviceTable() {
            const tableBody = document.getElementById('deviceTableBody');
            tableBody.innerHTML = '';
            
            let filteredDevices = devicesData;
            if (currentDeviceFilter === 'normal') {
                filteredDevices = devicesData.filter(d => d.status === 'normal');
            } else if (currentDeviceFilter === 'abnormal') {
                filteredDevices = devicesData.filter(d => d.status !== 'normal');
            }
            
            filteredDevices.forEach(device => {
                const statusClass = device.status === 'normal' ? 'status-normal' : (device.status === 'warning' ? 'status-warning' : 'status-error');
                const statusText = device.status === 'normal' ? 'æ­£å¸¸' : (device.status === 'warning' ? 'ç¼ºé’' : 'ç»´æŠ¤ä¸­');
                const row = document.createElement('tr');
                row.className = 'border-b';
                row.innerHTML = `
                    <td class="p-2">${device.id}</td>
                    <td class="p-2">${device.location}</td>
                    <td class="p-2">Â¥${device.balance.toLocaleString()}</td>
                    <td class="p-2"><span class="${statusClass}">${statusText}</span></td>
                    <td class="p-2"><button onclick="viewDetail('${device.id}')" class="text-blue-600">æŸ¥çœ‹è¯¦æƒ…</button></td>
                `;
                tableBody.appendChild(row);
            });
        }
        // æŸ¥çœ‹è®¾å¤‡è¯¦æƒ…
        function viewDetail(deviceId) {
            document.getElementById('mainPage').classList.add('hidden');
            document.getElementById('detailPage').classList.remove('hidden');
            
            const device = devicesData.find(d => d.id === deviceId);
            if (device) {
                document.getElementById('deviceId').textContent = deviceId;
                document.getElementById('detailDeviceId').textContent = deviceId;
                document.getElementById('detailLocation').textContent = device.location;
                document.getElementById('detailBalance').textContent = `Â¥${device.balance.toLocaleString()}`;
                
                const statusClass = device.status === 'normal' ? 'status-normal' : (device.status === 'warning' ? 'status-warning' : 'status-error');
                const statusText = device.status === 'normal' ? 'æ­£å¸¸' : (device.status === 'warning' ? 'ç¼ºé’' : 'ç»´æŠ¤ä¸­');
                document.getElementById('detailStatus').textContent = statusText;
                document.getElementById('detailStatus').className = statusClass;
                document.getElementById('lastUpdate').textContent = `æœ€åæ›´æ–°: ${device.lastUpdate}`;
                
                // é‡ç½®äº¤æ˜“è®°å½•ç­›é€‰
                currentPage = 1;
                filteredTransactions = [...transactions];
                renderTransactionTable();
            }
        }
        // è¿”å›ä¸»é¡µé¢
        function backToMain() {
            document.getElementById('detailPage').classList.add('hidden');
            document.getElementById('mainPage').classList.remove('hidden');
        }
        // åˆ·æ–°çŠ¶æ€
        function refreshStatus() {
            const deviceId = document.getElementById('deviceId').textContent;
            const device = devicesData.find(d => d.id === deviceId);
            if (device) {
                // æ›´æ–°æœ€ååˆ·æ–°æ—¶é—´ä¸ºå½“å‰æ—¶é—´
                const now = new Date();
                const timeString = now.getFullYear() + '-' + String(now.getMonth() + 1).padStart(2, '0') + '-' + String(now.getDate()).padStart(2, '0') + ' ' + String(now.getHours()).padStart(2, '0') + ':' + String(now.getMinutes()).padStart(2, '0');
                device.lastUpdate = timeString;
                document.getElementById('lastUpdate').textContent = `æœ€åæ›´æ–°: ${device.lastUpdate}`;
            }
            alert('çŠ¶æ€å·²åˆ·æ–°ï¼');
        }
        // æ‰“å¼€è¡¥å……ç°é‡‘æ¨¡æ€æ¡†
        function openCashModal() {
            const deviceId = document.getElementById('deviceId').textContent;
            document.getElementById('modalDeviceId').value = deviceId;
            document.getElementById('cashModal').style.display = 'block';
        }
        // å…³é—­è¡¥å……ç°é‡‘æ¨¡æ€æ¡†
        function closeCashModal() {
            document.getElementById('cashModal').style.display = 'none';
            document.getElementById('cashAmount').value = '';
        }
        // æäº¤è¡¥å……ç°é‡‘ï¼ˆä¿®æ”¹ï¼šæ–°å¢æ•´é¢æ ¡éªŒï¼‰
        function submitCash() {
            const amount = parseInt(document.getElementById('cashAmount').value);
            const deviceId = document.getElementById('modalDeviceId').value;
            if (!amount || amount <= 0) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é‡‘é¢');
                return;
            }
            // æ–°å¢ï¼šæ•´é¢æ ¡éªŒï¼ˆä»…æ”¯æŒ100çš„å€æ•°ï¼Œå¯æ ¹æ®éœ€æ±‚ä¿®æ”¹100ä¸ºå…¶ä»–æ•´é¢å•ä½ï¼‰
            if (amount % 100 !== 0) {
                alert('ä»…æ”¯æŒæ•´é¢è¡¥å……ï¼Œè¯·è¾“å…¥100çš„å€æ•°é‡‘é¢');
                return;
            }
            
            const device = devicesData.find(d => d.id === deviceId);
            if (device) {
                device.balance += amount;
                // æ›´æ–°æ˜¾ç¤ºçš„ä½™é¢
                document.getElementById('detailBalance').textContent = `Â¥${device.balance.toLocaleString()}`;
                // æ›´æ–°ä¸»é¡µé¢çš„è®¾å¤‡è¡¨æ ¼
                renderDeviceTable();
            }
            
            alert(`å·²æˆåŠŸä¸ºè®¾å¤‡ ${deviceId} è¡¥å……ç°é‡‘ Â¥${amount.toLocaleString()}`);
            closeCashModal();
        }
        // ç­›é€‰äº¤æ˜“è®°å½•
        function filterTransactions() {
            const type = document.getElementById('transactionType').value;
            const date = document.getElementById('dateFilter').value;
            
            filteredTransactions = transactions.filter(transaction => {
                let match = true;
                
                if (type !== 'all') {
                    const typeMap = { withdraw: 'å–æ¬¾', deposit: 'å­˜æ¬¾', transfer: 'è½¬è´¦' };
                    match = match && transaction.type === typeMap[type];
                }
                
                if (date) {
                    match = match && transaction.time.startsWith(date);
                }
                
                return match;
            });
            
            currentPage = 1;
            renderTransactionTable();
        }
        // æ¸²æŸ“äº¤æ˜“è®°å½•è¡¨æ ¼ï¼ˆä¿®æ”¹ï¼šä¿®å¤é‡å¤æ˜¾ç¤ºè®°å½•ç»Ÿè®¡çš„å¼‚å¸¸ï¼‰
        function renderTransactionTable() {
            const tableBody = document.getElementById('transactionTable');
            const pagination = document.getElementById('pagination');
            
            // æ¸…ç©ºç°æœ‰å†…å®¹ï¼ˆå…³é”®ä¿®å¤ï¼šå…ˆç§»é™¤ä¹‹å‰çš„ç»Ÿè®¡ä¿¡æ¯divï¼Œé¿å…é‡å¤ï¼‰
            const existingInfoDiv = pagination.parentNode.querySelector('.text-sm.text-gray-600');
            if (existingInfoDiv) {
                existingInfoDiv.remove();
            }
            tableBody.innerHTML = '';
            pagination.innerHTML = '';
            
            // è®¡ç®—åˆ†é¡µ
            const totalPages = Math.ceil(filteredTransactions.length / recordsPerPage);
            const startIndex = (currentPage - 1) * recordsPerPage;
            const endIndex = Math.min(startIndex + recordsPerPage, filteredTransactions.length);
            const pageTransactions = filteredTransactions.slice(startIndex, endIndex);
            
            // å¡«å……è¡¨æ ¼æ•°æ®
            pageTransactions.forEach(transaction => {
                const row = document.createElement('tr');
                row.className = 'border-b';
                row.innerHTML = `
                    <td class="p-2">${transaction.id}</td>
                    <td class="p-2">${transaction.time}</td>
                    <td class="p-2">${transaction.user}</td>
                    <td class="p-2">${transaction.type}</td>
                    <td class="p-2">${transaction.amount}</td>
                    <td class="p-2">${transaction.status}</td>
                `;
                tableBody.appendChild(row);
            });
            
            // æ›´æ–°è®°å½•æ˜¾ç¤ºä¿¡æ¯ï¼ˆä»…æ¸²æŸ“ä¸€æ¬¡ï¼‰
            const infoDiv = document.createElement('div');
            infoDiv.className = 'text-sm text-gray-600 mt-2';
            infoDiv.textContent = `æ˜¾ç¤º ${startIndex + 1} åˆ° ${endIndex} æ¡ï¼Œå…± ${filteredTransactions.length} æ¡è®°å½•`;
            pagination.parentNode.insertBefore(infoDiv, pagination);
            
            // ç”Ÿæˆåˆ†é¡µæŒ‰é’®
            if (totalPages > 1) {
                // ä¸Šä¸€é¡µæŒ‰é’®
                const prevButton = document.createElement('button');
                prevButton.textContent = 'ä¸Šä¸€é¡µ';
                prevButton.disabled = currentPage === 1;
                prevButton.onclick = () => {
                    if (currentPage > 1) {
                        currentPage--;
                        renderTransactionTable();
                    }
                };
                pagination.appendChild(prevButton);
                
                // é¡µç æŒ‰é’®
                for (let i = 1; i <= totalPages; i++) {
                    const pageButton = document.createElement('button');
                    pageButton.textContent = i;
                    pageButton.className = currentPage === i ? 'active' : '';
                    pageButton.onclick = () => {
                        currentPage = i;
                        renderTransactionTable();
                    };
                    pagination.appendChild(pageButton);
                }
                
                // ä¸‹ä¸€é¡µæŒ‰é’®
                const nextButton = document.createElement('button');
                nextButton.textContent = 'ä¸‹ä¸€é¡µ';
                nextButton.disabled = currentPage === totalPages;
                nextButton.onclick = () => {
                    if (currentPage < totalPages) {
                        currentPage++;
                        renderTransactionTable();
                    }
                };
                pagination.appendChild(nextButton);
            }
        }
        // å¯†ç æ˜¾éšåˆ‡æ¢
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.textContent = 'ğŸ™ˆ';
            } else {
                passwordInput.type = 'password';
                eyeIcon.textContent = 'ğŸ‘';
            }
        }
        // é€€å‡ºç™»å½•
        function logout() {
            document.getElementById('mainPage').classList.add('hidden');
            document.getElementById('detailPage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }
</script>
</body>
</html>
